
include ../Makefile.common

all:
	-cd string && $(MAKE)
	-cd net && $(MAKE)
	-cd web && $(MAKE)
	-cd os && $(MAKE)
	-cd stream && $(MAKE)
	-cd sync && $(MAKE)
#	-cd DaoCXX && $(MAKE)
#	-cd DaoJIT && $(MAKE)

clean:
	-cd string && $(MAKE) clean
	-cd net && $(MAKE) clean
	-cd web && $(MAKE) clean
	-cd os && $(MAKE) clean
	-cd stream && $(MAKE) clean
	-cd sync && $(MAKE) clean
#	-cd DaoCXX && $(MAKE) clean
#	-cd DaoJIT && $(MAKE) clean

install:
	@$(HAS_DIR) $(DAO_MOD_DIR)/string || $(MKDIR) $(DAO_MOD_DIR)/string
	@$(HAS_DIR) $(DAO_MOD_DIR)/web || $(MKDIR) $(DAO_MOD_DIR)/web
	@$(HAS_DIR) $(DAO_MOD_DIR)/os || $(MKDIR) $(DAO_MOD_DIR)/os
	@$(HAS_DIR) $(DAO_MOD_DIR)/stream || $(MKDIR) $(DAO_MOD_DIR)/stream
	-$(COPY) net/net.$(DAO_DLL_EXT) $(DAO_MOD_DIR)
	-$(COPY) string/string.dao $(DAO_MOD_DIR)/string
	-$(COPY) string/format.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/string
	-$(COPY) string/md5.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/string
	-$(COPY) string/tokenize.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/string
	-$(COPY) string/xxtea.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/string
	-$(COPY) stream/stream.dao $(DAO_MOD_DIR)/stream
	-$(COPY) stream/clprint.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/stream
	-$(COPY) stream/buffer.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/stream
	-$(COPY) sync/libsync.$(DAO_DLL_EXT) $(DAO_MOD_DIR)
	-$(COPY) web/cgi.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/web
	-$(COPY) web/json.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/web
	-$(COPY) os/fs.$(DAO_DLL_EXT) $(DAO_MOD_DIR)/os
	-$(COPY) os/os.dao $(DAO_MOD_DIR)/os

